<ion-header>
  <ion-toolbar>
    <ion-title>Bewerbungszusammenfassung</ion-title>
  </ion-toolbar>
</ion-header>

<ion-content>
  <div class="summary-container">
    <h1>Bewerbungszusammenfassung</h1>
    <p class="subtitle">Überprüfen Sie Ihre eingereichten Informationen</p>

    @if (formData()) {
    <!-- Personal Information -->
    <div class="section">
      <h2>Persönliche Informationen</h2>
      <div class="info-grid">
        <div class="info-item">
          <span class="label">Vorname:</span>
          <span class="value">{{ formData()!.personal.firstName }}</span>
        </div>
        <div class="info-item">
          <span class="label">Nachname:</span>
          <span class="value">{{ formData()!.personal.lastName }}</span>
        </div>
        <div class="info-item">
          <span class="label">Geburtsdatum:</span>
          <span class="value">{{ formData()!.personal.dateOfBirth }}</span>
        </div>
        <div class="info-item">
          <span class="label">Geburtsort:</span>
          <span class="value">{{ formData()!.personal.placeOfBirth }}</span>
        </div>
        <div class="info-item">
          <span class="label">Nationalität:</span>
          <span class="value">{{ formData()!.personal.nationality }}</span>
        </div>
        <div class="info-item">
          <span class="label">Familienstand:</span>
          <span class="value">{{ formData()!.personal.maritalStatus }}</span>
        </div>
      </div>
    </div>

    <!-- Contact & Address -->
    <div class="section">
      <h2>Kontakt & Adresse</h2>
      <div class="info-grid">
        <div class="info-item">
          <span class="label">Telefon:</span>
          <span class="value">{{ formData()!.contact.phone }}</span>
        </div>
        <div class="info-item">
          <span class="label">E-Mail:</span>
          <span class="value">{{ formData()!.contact.email }}</span>
        </div>
        <div class="info-item">
          <span class="label">Straße:</span>
          <span class="value">{{ formData()!.contact.street }}</span>
        </div>
        <div class="info-item">
          <span class="label">Hausnummer:</span>
          <span class="value">{{ formData()!.contact.houseNumber }}</span>
        </div>
        <div class="info-item">
          <span class="label">Postleitzahl:</span>
          <span class="value">{{ formData()!.contact.postalCode }}</span>
        </div>
        <div class="info-item">
          <span class="label">Stadt:</span>
          <span class="value">{{ formData()!.contact.city }}</span>
        </div>
      </div>
    </div>

    <!-- Languages -->
    <div class="section">
      <h2>Sprachkenntnisse</h2>
      <div class="info-grid">
        <div class="info-item">
          <span class="label">Deutschniveau:</span>
          <span class="value"
            >{{ formData()!.languages.germanLevel || 'Nicht angegeben' }}</span
          >
        </div>
        <div class="info-item">
          <span class="label">Englischniveau:</span>
          <span class="value"
            >{{ formData()!.languages.englishLevel || 'Nicht angegeben' }}</span
          >
        </div>
        @if (formData()!.languages.additionalLanguages) {
        <div class="info-item full-width">
          <span class="label">Zusätzliche Sprachen:</span>
          <span class="value"
            >{{ formData()!.languages.additionalLanguages }}</span
          >
        </div>
        }
      </div>
    </div>

    <!-- Education -->
    <div class="section">
      <h2>Bildung</h2>

      <!-- School Education -->
      <div class="experience-card">
        <h3>Schulbildung</h3>
        <div class="experience-period">
          {{ formatDate(formData()!.education.schoolStart) }} - {{
          formatDate(formData()!.education.schoolEnd) }}
        </div>
        <div class="experience-responsibilities">
          <strong>Schultyp:</strong>
          <p>{{ formData()!.education.schoolType }}</p>
        </div>
      </div>

      <!-- Higher Education -->
      @if (formData()!.education.higherEducation) {
      <div class="experience-card">
        <h3>Hochschulbildung</h3>
        <div class="experience-period">
          {{ formatDate(formData()!.education.higherEducationStart) }} - {{
          formatDate(formData()!.education.higherEducationEnd) }}
        </div>
        <div class="experience-responsibilities">
          <strong>Abschluss:</strong>
          <p>{{ formData()!.education.higherEducation }}</p>
        </div>
      </div>
      }
    </div>

    <!-- Work Experience -->
    <div class="section">
      <h2>Berufserfahrung</h2>
      @if (formData()!.workExperience && formData()!.workExperience.length > 0)
      { @for (experience of formData()!.workExperience; track $index) {
      <div class="experience-card">
        <h3>{{ experience.position }}</h3>
        <div class="experience-period">
          {{ formatDate(experience.start) }} - {{ formatDate(experience.end) }}
        </div>
        <div class="experience-responsibilities">
          <strong>Verantwortlichkeiten:</strong>
          <p>{{ experience.responsibilities }}</p>
        </div>
      </div>
      } } @else {
      <p class="no-data">Keine Berufserfahrung hinzugefügt</p>
      }
    </div>

    <!-- Action Buttons -->
    <div class="action-buttons">
      <ion-button expand="block" fill="outline" (click)="backToForm()">
        Zurück zum Formular
      </ion-button>
      <ion-button expand="block" color="success" (click)="downloadPDF()">
        PDF herunterladen
      </ion-button>
      <ion-button
        expand="block"
        color="danger"
        fill="outline"
        (click)="clearForm()"
      >
        Alle Daten löschen
      </ion-button>
    </div>
    } @else {
    <!-- No data available -->
    <div class="no-data-container">
      <h2>Keine Daten verfügbar</h2>
      <p>Bitte füllen Sie zuerst das Formular aus.</p>
      <ion-button expand="block" (click)="backToForm()">
        Zum Formular gehen
      </ion-button>
    </div>
    }
  </div>
</ion-content>
