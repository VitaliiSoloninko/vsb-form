<ion-header>
  <ion-toolbar>
    <ion-title>Application Summary</ion-title>
  </ion-toolbar>
</ion-header>

<ion-content>
  <div class="summary-container">
    <h1>Application Summary</h1>
    <p class="subtitle">Review your submitted information</p>

    @if (formData()) {
    <!-- Personal Information -->
    <div class="section">
      <h2>Personal Information</h2>
      <div class="info-grid">
        <div class="info-item">
          <span class="label">First Name:</span>
          <span class="value">{{ formData()!.personal.firstName }}</span>
        </div>
        <div class="info-item">
          <span class="label">Last Name:</span>
          <span class="value">{{ formData()!.personal.lastName }}</span>
        </div>
        <div class="info-item">
          <span class="label">Date of Birth:</span>
          <span class="value">{{ formData()!.personal.dateOfBirth }}</span>
        </div>
        <div class="info-item">
          <span class="label">Place of Birth:</span>
          <span class="value">{{ formData()!.personal.placeOfBirth }}</span>
        </div>
        <div class="info-item">
          <span class="label">Nationality:</span>
          <span class="value">{{ formData()!.personal.nationality }}</span>
        </div>
        <div class="info-item">
          <span class="label">Marital Status:</span>
          <span class="value">{{ formData()!.personal.maritalStatus }}</span>
        </div>
      </div>
    </div>

    <!-- Contact & Address -->
    <div class="section">
      <h2>Contact & Address</h2>
      <div class="info-grid">
        <div class="info-item">
          <span class="label">Phone:</span>
          <span class="value">{{ formData()!.contact.phone }}</span>
        </div>
        <div class="info-item">
          <span class="label">Email:</span>
          <span class="value">{{ formData()!.contact.email }}</span>
        </div>
        <div class="info-item">
          <span class="label">Street:</span>
          <span class="value">{{ formData()!.contact.street }}</span>
        </div>
        <div class="info-item">
          <span class="label">House Number:</span>
          <span class="value">{{ formData()!.contact.houseNumber }}</span>
        </div>
        <div class="info-item">
          <span class="label">Postal Code:</span>
          <span class="value">{{ formData()!.contact.postalCode }}</span>
        </div>
        <div class="info-item">
          <span class="label">City:</span>
          <span class="value">{{ formData()!.contact.city }}</span>
        </div>
      </div>
    </div>

    <!-- Languages -->
    <div class="section">
      <h2>Language Skills</h2>
      <div class="info-grid">
        <div class="info-item">
          <span class="label">German Level:</span>
          <span class="value"
            >{{ formData()!.languages.germanLevel || 'Not specified' }}</span
          >
        </div>
        <div class="info-item">
          <span class="label">English Level:</span>
          <span class="value"
            >{{ formData()!.languages.englishLevel || 'Not specified' }}</span
          >
        </div>
        @if (formData()!.languages.additionalLanguages) {
        <div class="info-item full-width">
          <span class="label">Additional Languages:</span>
          <span class="value"
            >{{ formData()!.languages.additionalLanguages }}</span
          >
        </div>
        }
      </div>
    </div>

    <!-- Education -->
    <div class="section">
      <h2>Education</h2>

      <!-- School Education -->
      <div class="education-subsection">
        <h3>School Education</h3>
        <div class="info-grid">
          <div class="info-item">
            <span class="label">School Type:</span>
            <span class="value">{{ formData()!.education.schoolType }}</span>
          </div>
          <div class="info-item">
            <span class="label">Period:</span>
            <span class="value">
              {{ formatDate(formData()!.education.schoolStart) }} - {{
              formatDate(formData()!.education.schoolEnd) }}
            </span>
          </div>
        </div>
      </div>

      <!-- Higher Education -->
      @if (formData()!.education.higherEducation) {
      <div class="education-subsection">
        <h3>Higher Education</h3>
        <div class="info-grid">
          <div class="info-item">
            <span class="label">Degree:</span>
            <span class="value"
              >{{ formData()!.education.higherEducation }}</span
            >
          </div>
          <div class="info-item">
            <span class="label">Period:</span>
            <span class="value">
              {{ formatDate(formData()!.education.higherEducationStart) }} - {{
              formatDate(formData()!.education.higherEducationEnd) }}
            </span>
          </div>
        </div>
      </div>
      }
    </div>

    <!-- Work Experience -->
    <div class="section">
      <h2>Work Experience</h2>
      @if (formData()!.workExperience && formData()!.workExperience.length > 0)
      { @for (experience of formData()!.workExperience; track $index) {
      <div class="experience-card">
        <h3>{{ experience.position }}</h3>
        <div class="experience-period">
          {{ formatDate(experience.start) }} - {{ formatDate(experience.end) }}
        </div>
        <div class="experience-responsibilities">
          <strong>Responsibilities:</strong>
          <p>{{ experience.responsibilities }}</p>
        </div>
      </div>
      } } @else {
      <p class="no-data">No work experience added</p>
      }
    </div>

    <!-- Action Buttons -->
    <div class="action-buttons">
      <ion-button expand="block" fill="outline" (click)="backToForm()">
        Back to Form
      </ion-button>
      <ion-button expand="block" color="success" (click)="downloadPDF()">
        Download PDF
      </ion-button>
      <ion-button
        expand="block"
        color="danger"
        fill="outline"
        (click)="clearForm()"
      >
        Clear All Data
      </ion-button>
    </div>
    } @else {
    <!-- No data available -->
    <div class="no-data-container">
      <h2>No Data Available</h2>
      <p>Please fill out the form first.</p>
      <ion-button expand="block" (click)="backToForm()">
        Go to Form
      </ion-button>
    </div>
    }
  </div>
</ion-content>
