<div class="step-content" [formGroup]="formGroup">
  <h2>Education</h2>

  <!-- School Education Card -->
  <div class="education-card">
    <div class="card-header">
      <h3>School Education</h3>
    </div>

    <ion-item>
      <ion-label position="floating">School Type</ion-label>
      <ion-select formControlName="schoolType" placeholder="Select school type">
        @for (type of schoolTypes; track type.value) {
          <ion-select-option [value]="type.value">
            {{ type.label }}
          </ion-select-option>
        }
      </ion-select>
    </ion-item>

    <ion-item button="true" id="school-start-trigger">
      <ion-label position="stacked">Start Date</ion-label>
      <div class="date-value">
        {{ formatDate(formGroup.get("schoolStart")?.value) }}
      </div>
    </ion-item>

    <ion-item button="true" id="school-end-trigger">
      <ion-label position="stacked">End Date</ion-label>
      <div class="date-value">
        {{ formatDate(formGroup.get("schoolEnd")?.value) }}
      </div>
    </ion-item>
  </div>

  <!-- Higher Education Card -->
  <div class="education-card">
    <div class="card-header">
      <h3>Higher Education</h3>
    </div>

    <ion-item>
      <ion-label position="floating">Degree</ion-label>
      <ion-select formControlName="higherEducation" placeholder="Select degree">
        @for (edu of higherEducationTypes; track edu.value) {
          <ion-select-option [value]="edu.value">
            {{ edu.label }}
          </ion-select-option>
        }
      </ion-select>
    </ion-item>

    <ion-item button="true" id="higher-start-trigger">
      <ion-label position="stacked">Start Date</ion-label>
      <div class="date-value">
        {{ formatDate(formGroup.get("higherEducationStart")?.value) }}
      </div>
    </ion-item>

    <ion-item button="true" id="higher-end-trigger">
      <ion-label position="stacked">End Date</ion-label>
      <div class="date-value">
        {{ formatDate(formGroup.get("higherEducationEnd")?.value) }}
      </div>
    </ion-item>
  </div>
</div>

<!-- Modals for date selection -->
<ion-modal trigger="school-start-trigger" #schoolStartModal>
  <ng-template>
    <div class="modal-content">
      <ion-datetime
        presentation="month-year"
        [value]="formGroup.get('schoolStart')?.value"
        (ionChange)="confirmDate('schoolStart', $event)"
      ></ion-datetime>
      <ion-button expand="block" (click)="schoolStartModal.dismiss()">
        OK
      </ion-button>
    </div>
  </ng-template>
</ion-modal>

<ion-modal trigger="school-end-trigger" #schoolEndModal>
  <ng-template>
    <div class="modal-content">
      <ion-datetime
        presentation="month-year"
        [value]="formGroup.get('schoolEnd')?.value"
        (ionChange)="confirmDate('schoolEnd', $event)"
      ></ion-datetime>
      <ion-button expand="block" (click)="schoolEndModal.dismiss()">
        OK
      </ion-button>
    </div>
  </ng-template>
</ion-modal>

<ion-modal trigger="higher-start-trigger" #higherStartModal>
  <ng-template>
    <div class="modal-content">
      <ion-datetime
        presentation="month-year"
        [value]="formGroup.get('higherEducationStart')?.value"
        (ionChange)="confirmDate('higherEducationStart', $event)"
      ></ion-datetime>
      <ion-button expand="block" (click)="higherStartModal.dismiss()">
        OK
      </ion-button>
    </div>
  </ng-template>
</ion-modal>

<ion-modal trigger="higher-end-trigger" #higherEndModal>
  <ng-template>
    <div class="modal-content">
      <ion-datetime
        presentation="month-year"
        [value]="formGroup.get('higherEducationEnd')?.value"
        (ionChange)="confirmDate('higherEducationEnd', $event)"
      ></ion-datetime>
      <ion-button expand="block" (click)="higherEndModal.dismiss()">
        OK
      </ion-button>
    </div>
  </ng-template>
</ion-modal>
